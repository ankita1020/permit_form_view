<div class="container">
  <h2>Permit Application Form</h2>
  <form [formGroup]="userPermitForm" (ngSubmit)="onSubmit()">
    <!-- Username -->
    <label for="username">Username</label>
    <input id="username" formControlName="username" type="text" />
    <div *ngIf="userPermitForm.get('username')?.invalid && userPermitForm.get('username')?.touched" class="error">
      Username is required.
    </div>

    <fieldset formGroupName="address">
      <!-- Address Line 1 -->
      <label for="addressLine1">Address Line 1</label>
      <input id="addressLine1" formControlName="addressLine1" type="text" />
      <div *ngIf="userPermitForm.get('address.addressLine1')?.invalid && userPermitForm.get('address.addressLine1')?.touched" class="error">
        Address Line 1 is required.
      </div>

      <!-- Address Line 2 -->
      <label for="addressLine2">Address Line 2</label>
      <input id="addressLine2" formControlName="addressLine2" type="text" />

      <!-- City -->
      <label for="city">City</label>
      <input id="city" formControlName="city" type="text" />
      <div *ngIf="userPermitForm.get('address.city')?.invalid && userPermitForm.get('address.city')?.touched" class="error">
        City is required.
      </div>

      <!-- State -->
      <label for="state">State</label>
      <input id="state" formControlName="state" type="text" />
      <div *ngIf="userPermitForm.get('address.state')?.invalid && userPermitForm.get('address.state')?.touched" class="error">
        State is required.
      </div>

      <!-- Zipcode -->
      <label for="zipcode">Zipcode</label>
      <input id="zipcode" formControlName="zipcode" type="text" />
      <div *ngIf="userPermitForm.get('address.zipcode')?.invalid && userPermitForm.get('address.zipcode')?.touched" class="error">
        Zipcode is required and must be 5 digits.
      </div>

      <!-- Country -->
      <label for="country">Country</label>
      <input id="country" formControlName="country" type="text" />
      <div *ngIf="userPermitForm.get('address.country')?.invalid && userPermitForm.get('address.country')?.touched" class="error">
        Country is required.
      </div>
    </fieldset>

    <!-- County -->
    <label for="county">County</label>
    <select id="county" formControlName="countyId">
      <option value="" disabled>Select County</option>
      <option *ngFor="let county of counties" [value]="county.countyId">{{ county.countyName }}</option>
    </select>
    <div *ngIf="userPermitForm.get('county')?.invalid && userPermitForm.get('county')?.touched" class="error">
      Please select a county.
    </div>

    <!-- Permit Type -->
    <label for="permitType">Permit Type</label>
    <select id="permitType" formControlName="permitTypeId">
      <option value="" disabled>Select Permit Type</option>
      <option *ngFor="let permit of permitTypes" [value]="permit.permitTypeId">{{ permit.permitTypeName }}</option>
    </select>
    <div *ngIf="userPermitForm.get('permitType')?.invalid && userPermitForm.get('permitType')?.touched" class="error">
      Please select a permit type.
    </div>

    <!-- Submit Button -->
    <button type="submit" [disabled]="userPermitForm.invalid">Submit</button>
  </form>
</div>
